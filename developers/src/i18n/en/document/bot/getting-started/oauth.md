# OAuth Authorization

To access the personal information, assets, and other data of Mixin Messenger users, the developer needs to apply for authorization from the user.

### OAuth Scope

| Permission         |  Description                      |
|:------------------:|:----------------------------------|
| PROFILE:READ       | Get basic user information, such as user id, Mixin ID, name, and avatar.|
| ASSETS:READ        | Read user asset list and balance.            |
| PHONE:READ         | Read the user's mobile phone number.                   |
| CONTACTS:READ      | Read user contact list, block list.                 |
| MESSAGES:REPRESENT | Allow bots to send messages on behalf of users.                    |
| SNAPSHOTS:READ     | Access user's transfer records, including deposits and reminders.        |

The permissions requested should contain at least the PROFILE:READ permission. Users may uncheck certain permissions when authorizing. It is recommended that developers only apply for necessary permissions and make proper guidance GUIs in the absence of permissions.

### Requesting Authorization

When the bot detects that it is not authorized by a user, it should jump to `https://mixin-www.zeromesh.net/oauth/authorize?client_id=b7347ca4-186e-4e54-9db6-755a4ab0b5d4&scope=PROFILE:READ+ASSETS:READ&response_type=code&return_to=` to request authorization from the user. The parameters:

**Required Parameters**

- client_id - Bot ID.
- scope - Permissions to request.
- response_type - Always set to `code` to get authorization code.

**Optional Parameters**

- return_to - Link to the current page, which is used to take the user back to this page after authorization.
- state - A random string generated by your application, which youâ€™ll verify later.
- code_challenge - The code challenge generated by your app, it's a SHA256 hash of your code verifier. For more information about it, please [visit here](https://www.oauth.com/oauth2-servers/pkce/authorization-request/)
- code_challenge_method - The code challenge method, please set it to `SHA256`

After successful authorization, the page will automatically jump to the bot's verification URL, the callback URL will be accompanied by the authorization code and return_to parameters, and the developer will then request a token based on the authorization code:

The request:

```
POST https://mixin-api.zeromesh.net/oauth/token
```

With the following data:

// TODO: JSON to be completed.
```
{
    "client_id": "",
    "code": "",
    "client_secret": ""
}
```

What's in each field:

- `client_id`: Bot ID.
- `code`: Authorization code returned by callback.
- `client_secret`: Bot key.


The response:

```
{
    "access_token": "",
    "scope": ""
}
```

What's in each field:

- `access_token`: User access token.
- `scope`: Permissions that user granted, e.g. 'PROFILE:READ ASSETS:READ'.

It is recommended that the developer cache the access token, and then use the access token to call the API to access user data, which can determine whether the user is authorized.

### Revoking Authorization

Developers can find the bot and revoke authorization in Mixin Messenger Settings, Privacy and Security, Authorization. Note that revoking authorization will also clear the cached information of the current bot on the client-side, such as cookies.


### Next Step

- [Getting User Data](./api)
