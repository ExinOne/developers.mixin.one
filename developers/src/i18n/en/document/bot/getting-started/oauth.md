# OAuth Authorization

To access personal information, assets, and other data of a Mixin Messenger user, the developer need to first request authorization from the user.

## OAuth Scope

| Permissions | Description |
|:------------------:|:----------------------------------|
| PROFILE:READ | To get basic information about the user, such as user id, Mixin ID, name, avatar |
| ASSETS:READ | To read user's asset list, asset balance |
| PHONE:READ | To read user's cell phone number |
| CONTACTS:READ | To read user's contact list, ban list |
| MESSAGES:REPRESENT | To allow the bot to send messages on behalf of the user |
| SNAPSHOTS:READ | To access user's transfer history, including deposits and reminders |

The permissions requested should contain at least the PROFILE:READ permission, and the user may check off certain permissions during the authorization. It is recommended that developers apply for only the necessary permissions and provide interfaces to guide users in case of missing permissions.

## Requesting Authorization

When the bot detects that the user is not authorized it should jump to https://mixin.one/oauth/authorize?client_id={CLIENT_ID}&scope={SCOPE}&response_type=code&return_to= to request authorization from the user.

**Required Parameters**

- client_id - unique bot identifier,
- scope - requested permissions, required
- response_type - use "code" to return authorization code, required

**Optional Parameters**

- return_to - the link to the current page, which after authorization can be used to jump back to the current interface, optional
- state - A random string generated by your application, which youâ€™ll verify later, optional
- code_challenge - the code challenge generated as previously described, optional
- code_challenge_method - the code challenge method, please assign it with `SHA256`

After successful authorization, the page will automatically jump to the bot's authentication URL, the callback URL will be accompanied by the authorization code and return_to parameters, and the developer will then request a token based on the authorization code:

```
POST https://mixin-api.zeromesh.net/oauth/token
{
    "client_id": "unique bot identifier",
    "code": "authorization code returned by the successful authorization callback",
    "client_secret": "bot key"
}

Returned data:
{
    "access_token": "user authorization token",
    "scope": "list of permissions that the user has given, e.g. 'PROFILE:READ ASSETS:READ'"
}
```

It is recommended that developers cache the access token and subsequently call the API to access the user data via the access token, to determine whether the user has authorized or not.

## Revoking Authorization

You can cancel the authorization of the bot in Mixin Messenger Settings - Privacy and Security - Authorization, and note that canceling the authorization will clear the client's current bot's cookies and other cache information.
